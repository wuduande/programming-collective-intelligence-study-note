# 推荐的本质
推荐的本质是根据用户已有的行为猜测用户可能的偏好。
只根据单个用户行为预测，信息过少，本节详解了根据相似用户的偏好进行猜测的推荐算法。

# 推算算法细节
总体思路：
1. 找到相似的用户。
2. 列出相似用户评价过的所有物品，及相应评分。
3. 根据每个用户的相似度对物品评分进行加权。
4. 返回加权评分最高的物品。

## 用户相似度的评价

1. 将用户行为量化。即构造描述行为偏好的向量。每个维度代表用户对一种物品的喜好程度。
2. 有多种相似度评价函数可用。如：欧氏距离，皮尔逊相关度，余弦夹角等。
3. 只将两个用户共同评价过的物品（维度）纳入计算范围。

# 数学基础

用户评分矩阵（不包括被推荐用户自身的评分）：
U=[s11, s12;
   s21, s22;
   s31, s32];
行为用户维度，列为物品维度，元素为评分。

计算其它用户与指定用户相似度时。
得到相似度向量:
a = [a1;
     a2;
     a3];

计算各物品加权分：
R = a' * U;

取出R中分值最高的物品作为推荐即可。

# 当用户之间交集较少时（物品数远大于用户数）
此时，用户之前相似度的计算几乎都为0,没有参考意义。另外，以上算法要求实时计算，其计算量过于巨大了。
因此，考虑从物品维度出发进行推荐。物品之间的相似性是稳定的，因此通过提前计算规避速度问题。

将矩阵U转置。
提前计算行向量之间两两相似度,a1,a2相似度记为M{a1,a2}。
列出被推荐用户所评分过的物品评分靠前的物品，为集合B，B中元素记为bi,元素bi得分记为：S(bi);
根据B中物品，列出与之相似物品。得集合C={F(b1),F(b2),...},其中，F为映射函数，将元素b映射到其相似物品集。
F(bi)中元素记为Fij，S(Fij)=S(bi)*M{Fij,bi}
将分值最高物品排名列出即可。